# Rust 学习笔记

## 数据类型

### 字符串

`r#"Hello"#` 可以表示原生字符串，也就是说里面的任何内容都不会被转义，包括 `\`、`#` 等。唯一不允许在内容中出现的是 `"#`，否则它将无法正常判断结尾。但是如果出现这种情况，也可以很简单的处理，即把 `#` 改成 `##` 或更多，就不会混淆了。但是要注意前后的数量要匹配。

### 数字

可以在数字中的任意位置添加 `_`，以方便阅读。

支持多种进制，如 `0x`/`0o`/`0b`。也支持科学计数法，如 `1.23e10`

数字可以加后缀，以表示子类型，如 `123u16`。`u` 表示无符号整数，`i` 表示有符号整数，数字为8、16、32、64、128、size。`f` 表示浮点数，数字为 32、64。

### 元组

是一个固定长度、不要求同一类型的数据结构。可以通过 `a.1` 等形式访问

### 数组

rust 中数组是固定长度的。变长的需要用 vector

## 宏

宏是供编译器执行的语法。

### 调用宏

1. 作为语句使用：其调用方式是 `macro_name!(parameters)`。比如 `println!(123);`。
2. 作为表达式使用：其调用方式是 `macro_name![parameters]`。比如 `let x = vec![1,2,3];`
3. 在模式匹配中使用：其调用方式是 `macro_name!(parameters)`。比如 `if let pat!(x) = SOme(1) {}`。
4. 在类型中使用：其调用方式是 `macro_name!(parameters)`。
5. 作为关联程序项使用
6. 宏内可以调用其它宏

定义新宏有两种方式：

### 声明宏

简单、功能较少的定义方式

`macro_rules ! ID`

### 过程宏

复杂、灵活的定义方式

## 语句块

可以直接用 `{}` 来定义一个子作用域。可以和外部变量同名。

## 表达式

表达式就是结尾不带 `;` 的语法，如果作用域的结尾是一个表达式，则它会作为返回值。

`if` 等语句可以作为表达式使用。

## 函数

返回值用 `->` 表示。

未定义返回值类型的函数返回空元组 `()`（又叫 `unit`）。

## 语句

循环语句有 `loop`、`while`、`for`

